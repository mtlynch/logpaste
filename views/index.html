<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{{.Title}}</title>
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
  </head>
  <body>
    <h1>{{.Title}}</h1>

    <p>A simple debug log upload service.</p>

    <p>Better documentation coming soon.</p>

    <p>
      More info:
      <a href="https://github.com/mtlynch/logpaste">github.com/mtlynch/logpaste</a>
    </p>

    <textarea id="input"></textarea>

    <input type="submit" id="upload" value="Upload" />

    <div id="result"></div>


    <script src="/js/controllers.js"></script>
    <script>
      document.getElementById("upload").addEventListener("click", (evt) => {
        const textToUpload = document.getElementById("input").value;
        controllers.uploadText(textToUpload).then((id) => {
          const resultUrl = `${document.location}${id}`;

          const paragraph = document.createElement("p");
          paragraph.innerText = resultUrl;

          const anchor = document.createElement("a");
          anchor.href = resultUrl;
          anchor.appendChild(paragraph);

          const resultDiv = document.getElementById("result");
          while (resultDiv.firstChild) {
            resultDiv.removeChild(resultDiv.lastChild);
          }
          resultDiv.appendChild(anchor);
        });
      });
    </script>
  </body>
</html>
